var HASH=35,DOT=46,TAG_NAME=0,ID=1,CLASS_NAME=2,parseQuery=function(e){var n=null,t=null,o=null,i=TAG_NAME,l=0;for(var r=0;r<=e.length;r++){var u=e.charCodeAt(r),_=u===HASH,d=u===DOT,c=!u;(_||d||c)&&(i===TAG_NAME?(r===0?(n='div'):(n=e.substring(l,r))):i===ID?(t=e.substring(l,r)):(o?(o+=' '+e.substring(l,r)):(o=e.substring(l,r))),_?(i=ID):d&&(i=CLASS_NAME),l=r+1)}return{tag:n,id:t,className:o}},createElement=function(e,n){var t=parseQuery(e),o=t.tag,i=t.id,l=t.className,r=n?document.createElementNS(n,o):document.createElement(o);i&&(r.id=i);l&&(n?r.setAttribute('class',l):(r.className=l));return r},unmount=function(e,n){var t=getEl(e),o=getEl(n);n===o&&o.__redom_view&&(n=o.__redom_view);o.parentNode&&(doUnmount(n,o,t),t.removeChild(o));return n},doUnmount=function(e,n,t){var o=n.__redom_lifecycle;if(hooksAreEmpty(o)){n.__redom_mounted=!1;return}var i=t;n.__redom_mounted&&trigger(n,'onunmount');while(i){var l=i.__redom_lifecycle||{};for(var r in o)l[r]&&(l[r]-=o[r]);hooksAreEmpty(l)&&(i.__redom_lifecycle=null);i=i.parentNode}},hooksAreEmpty=function(e){if(e==null){return!0}for(var n in e){if(e[n]){return!1}}return!0},hookNames=['onmount','onremount','onunmount'],shadowRootAvailable=typeof window!=='undefined'&&'ShadowRoot' in window,mount=function(e,n,t,o){var i=getEl(e),l=getEl(n);n===l&&l.__redom_view&&(n=l.__redom_view);n!==l&&(l.__redom_view=n);var r=l.__redom_mounted,u=l.parentNode;r&&u!==i&&doUnmount(n,l,u);t!=null?(o?i.replaceChild(l,getEl(t)):i.insertBefore(l,getEl(t))):i.appendChild(l);doMount(n,l,i,u);return n},doMount=function(e,n,t,o){var i=n.__redom_lifecycle||(n.__redom_lifecycle={}),l=t===o,r=!1;for(var u=0,_=hookNames;u<_.length;u+=1){var d=_[u];l||(e!==n&&(d in e&&(i[d]=(i[d]||0)+1)));i[d]&&(r=!0)}if(!r){n.__redom_mounted=!0;return}var c=t,f=!1;(l||c&&c.__redom_mounted)&&(trigger(n,l?'onremount':'onmount'),f=!0);while(c){var w=c.parentNode,a=c.__redom_lifecycle||(c.__redom_lifecycle={});for(var m in i)a[m]=(a[m]||0)+i[m];if(f){break}else (c===document||shadowRootAvailable&&c instanceof window.ShadowRoot||w&&w.__redom_mounted)&&(trigger(c,l?'onremount':'onmount'),f=!0),c=w}},trigger=function(e,n){n==='onmount'||n==='onremount'?(e.__redom_mounted=!0):n==='onunmount'&&(e.__redom_mounted=!1);var t=e.__redom_lifecycle;if(!t){return}var o=e.__redom_view,i=0;o&&o[n]&&o[n]();for(var l in t)l&&i++;if(i){var r=e.firstChild;while(r){var u=r.nextSibling;trigger(r,n);r=u}}},setStyle=function(e,n,t){var o=getEl(e);if(t!==void 0)o.style[n]=t;else if(isString(n))o.setAttribute('style',n);else{for(var i in n)setStyle(o,i,n[i])}},xlinkns='http://www.w3.org/1999/xlink',setAttr=function(e,n,t){var o=getEl(e),i=o instanceof SVGElement;if(t!==void 0){if(n==='style')setStyle(o,t);else if(i&&isFunction(t))o[n]=t;else if(n==='dataset')setData(o,t);else if(!i&&(n in o||isFunction(t)))o[n]=t;else{if(i&&n==='xlink'){setXlink(o,t);return}o.setAttribute(n,t)}}else{for(var l in n)setAttr(o,l,n[l])}};function setXlink(e,n){for(var t in n)e.setAttributeNS(xlinkns,t,n[t])}function setData(e,n){for(var t in n)e.dataset[t]=n[t]}var text=function(e){return document.createTextNode(e!=null?e:'')},parseArguments=function(e,n){for(var t=0,o=n;t<o.length;t+=1){var i=o[t];if(i!==0&&!i){continue}var l=typeof i;l==='function'?i(e):l==='string'||l==='number'?e.appendChild(text(i)):isNode(getEl(i))?mount(e,i):i.length?parseArguments(e,i):l==='object'&&setAttr(e,i)}},ensureEl=function(e){return isString(e)?html(e):getEl(e)},getEl=function(e){return e.nodeType&&e||!e.el&&e||getEl(e.el)},isString=function(e){return typeof e==='string'},isFunction=function(e){return typeof e==='function'},isNode=function(e){return e&&e.nodeType},htmlCache={},memoizeHTML=function(e){return htmlCache[e]||(htmlCache[e]=createElement(e))},html=function(e){var n=[],t=arguments.length-1;while(t-->0)n[t]=arguments[t+1];var o;if(isString(e))o=memoizeHTML(e).cloneNode(!1);else if(isNode(e))o=e.cloneNode(!1);else if(isFunction(e)){var i=e;o=new (Function.prototype.bind.apply(i,[null].concat(n)))}else{throw new Error('At least one argument required')}parseArguments(getEl(o),n);return o};html.extend=function(e){var n=[],t=arguments.length-1;while(t-->0)n[t]=arguments[t+1];var o=memoizeHTML(e);return html.bind.apply(html,[this,o].concat(n))};var el=html,h=html,setChildren=function(e){var n=[],t=arguments.length-1;while(t-->0)n[t]=arguments[t+1];var o=getEl(e),i=traverse(e,n,o.firstChild);while(i){var l=i.nextSibling;unmount(e,i);i=l}};function traverse(e,n,t){var o=t,i=new Array(n.length);for(var l=0;l<n.length;l++)i[l]=n[l]&&getEl(n[l]);for(var r=0;r<n.length;r++){var u=n[r];if(!u){continue}var _=i[r];if(_===o){o=o.nextSibling;continue}if(isNode(_)){var d=o&&o.nextSibling,c=u.__redom_index!=null,f=c&&d===i[r+1];mount(e,u,o,f);f&&(o=d);continue}u.length!=null&&(o=traverse(e,u,o))}return o}var propKey=function(e){return function(n){return n[e]}},listPool=function(e,n,t){return new ListPool(e,n,t)},ListPool=function(e,n,t){this.View=e;this.initData=t;this.oldLookup={};this.lookup={};this.oldViews=[];this.views=[];n!=null&&(this.key=isFunction(n)?n:propKey(n))};ListPool.prototype.update=function(e,n){var t=this,o=t.View,i=t.key,l=t.initData,r=i!=null,u=this.lookup,_={},d=new Array(e.length),c=this.views;for(var f=0;f<e.length;f++){var w=e[f],a=void 0;if(r){var m=i(w);a=u[m]||new o(l,w,f,e);_[m]=a;a.__redom_id=m}else a=c[f]||new o(l,w,f,e);a.update&&a.update(w,f,e,n);var p=getEl(a.el);p.__redom_view=a;d[f]=a}this.oldViews=c;this.views=d;this.oldLookup=u;this.lookup=_};var list=function(e,n,t,o){return new List(e,n,t,o)},List=function(e,n,t,o){this.__redom_list=!0;this.View=n;this.initData=o;this.views=[];this.pool=new ListPool(n,t,o);this.el=ensureEl(e);this.keySet=t!=null};List.prototype.update=function(e,n){e===void 0&&(e=[]);var t=this,o=t.keySet,i=this.views;this.pool.update(e,n);var l=this.pool,r=l.views,u=l.lookup;if(o){for(var _=0;_<i.length;_++){var d=i[_],c=d.__redom_id;u[c]==null&&(d.__redom_index=null,unmount(this,d))}}for(var f=0;f<r.length;f++){var w=r[f];w.__redom_index=f}setChildren(this,r);o&&(this.lookup=u);this.views=r};List.extend=function(e,n,t,o){return List.bind(List,e,n,t,o)};list.extend=List.extend;var place=function(e,n){return new Place(e,n)},Place=function(e,n){this.el=text('');this.visible=!1;this.view=null;this._placeholder=this.el;e instanceof Node?(this._el=e):(this._View=e);this._initData=n};Place.prototype.update=function(e,n){var t=this._placeholder,o=this.el.parentNode;if(e){if(!this.visible){if(this._el){mount(o,this._el,t);unmount(o,t);this.el=this._el;this.visible=e;return}var i=this._View,l=new i(this._initData);this.el=getEl(l);this.view=l;mount(o,l,t);unmount(o,t)}this.view&&this.view.update&&this.view.update(n)}else{if(this.visible){if(this._el){mount(o,t,this._el);unmount(o,this._el);this.el=t;this.visible=e;return}mount(o,t,this.view);unmount(o,this.view);this.el=t;this.view=null}}this.visible=e};var router=function(e,n,t){return new Router(e,n,t)},Router=function(e,n,t){this.el=ensureEl(e);this.Views=n;this.initData=t};Router.prototype.update=function(e,n){if(e!==this.route){var t=this.Views,o=t[e];this.route=e;this.view=o&&new o(this.initData,n);setChildren(this.el,[this.view])}this.view&&this.view.update&&this.view.update(n,e)};var ns='http://www.w3.org/2000/svg',svgCache={},memoizeSVG=function(e){return svgCache[e]||(svgCache[e]=createElement(e,ns))},svg=function(e){var n=[],t=arguments.length-1;while(t-->0)n[t]=arguments[t+1];var o;if(isString(e))o=memoizeSVG(e).cloneNode(!1);else if(isNode(e))o=e.cloneNode(!1);else if(isFunction(e)){var i=e;o=new (Function.prototype.bind.apply(i,[null].concat(n)))}else{throw new Error('At least one argument required')}parseArguments(getEl(o),n);return o};svg.extend=function(e){var n=memoizeSVG(e);return svg.bind(this,n)};svg.ns=ns;var s=svg;export { el, h, html, list, List, listPool, ListPool, mount, unmount, place, Place, router, Router, setAttr, setStyle, setChildren, s, svg, text }