(function(e,u){"object"===typeof exports&&"undefined"!==typeof module?u(exports):"function"===typeof define&&define.amd?define(["exports"],u):u(e.redom={})})(this,function(e){function u(a,c,b){for(var d=0;d<c.length;d++){var f=c[d];if(f){var r=g(f);r===b?b=b.nextSibling:(r&&r.nodeType&&k(a,f,b),null!=f.length&&(b=u(a,f,b)))}}return b}var y=function(a,c){for(var b,d=null,f=b=null,r=0,e=0,h=0;h<=a.length;h++){var g=a.charCodeAt(h),q=35===g,m=46===g;g=!g;if(q||m||g)0===r?d=0===h?"div":a.substring(e,
h):1===r?b=a.substring(e,h):f=f?f+(" "+a.substring(e,h)):a.substring(e,h),q?r=1:m&&(r=2),e=h+1}a=d;a=c?document.createElementNS(c,a):document.createElement(a);b&&(a.id=b);f&&(c?a.setAttribute("class",f):a.className=f);return a},p=function(a,c){a=g(a);var b=g(c);c===b&&b.__redom_view&&(c=b.__redom_view);b.parentNode&&(L(c,b,a),a.removeChild(b));return c},L=function(a,c,b){if(a=c.__redom_lifecycle)for(c.__redom_mounted&&z(c,"onunmount");b;){c=b.__redom_lifecycle||(b.__redom_lifecycle={});var d=!1,f;
for(f in a)c[f]&&(c[f]-=a[f]),c[f]&&(d=!0);d||(b.__redom_lifecycle=null);b=b.parentNode}else c.__redom_mounted=!1},M=["onmount","onunmount"],P="ShadowRoot"in window,k=function(a,c,b){var d=g(a);a=g(c);c===a&&a.__redom_view&&(c=a.__redom_view);c!==a&&(a.__redom_view=c);var f=a.parentNode;a.__redom_mounted&&f!==d&&L(c,a,f);null!=b?d.insertBefore(a,g(b)):d.appendChild(a);var e=c;b=a.__redom_lifecycle||(a.__redom_lifecycle={});f=d===f;for(var v=!1,h=0;h<M.length;h++){var k=M[h];!f&&e!==a&&k in e&&(b[k]=
(b[k]||0)+1);b[k]&&(v=!0)}if(v){e=!1;if(f||!e&&d&&d.__redom_mounted)z(a,f?"onremount":"onmount"),e=!0;if(!f)for(;d;){a=d.parentNode;v=d.__redom_lifecycle||(d.__redom_lifecycle={});for(var q in b)v[q]=(v[q]||0)+b[q];!e&&(d===document||P&&d instanceof window.ShadowRoot||a&&a.__redom_mounted)&&(z(d,f?"onremount":"onmount"),e=!0);d=a}}else a.__redom_mounted=!0;return c},z=function(a,c){"onmount"===c?a.__redom_mounted=!0:"onunmount"===c&&(a.__redom_mounted=!1);var b=a.__redom_lifecycle;if(b){var d=a.__redom_view,
f=0;d&&d[c]&&d[c]();for(var e in b)e&&f++;if(f)for(a=a.firstChild;a;)b=a.nextSibling,z(a,c),a=b}},D=function(a,c,b){a=g(a);if(void 0!==b)a.style[c]=b;else if(w(c))a.setAttribute("style",c);else for(var d in c)D(a,d,c[d])},F=function(a,c,b){a=g(a);var d=a instanceof SVGElement;if(void 0!==b)if("style"===c)D(a,b);else if(d&&E(b))a[c]=b;else if(!d&&(c in a||E(b)))a[c]=b;else if(d&&"xlink"===c)for(var f in b)a.setAttributeNS("http://www.w3.org/1999/xlink",f,b[f]);else a.setAttribute(c,b);else for(var e in c)F(a,
e,c[e])},G=function(a){return document.createTextNode(a)},H=function(a,c){for(var b=0;b<c.length;b++){var d=c[b];if(0===d||d)if("function"===typeof d)d(a);else if(w(d)||"number"===typeof d)a.appendChild(G(d));else{var f=g(d);f&&f.nodeType?k(a,d):d.length?H(a,d):"object"===typeof d&&F(a,d)}}},N=function(a){return w(a)?l(a):g(a)},g=function(a){return a.nodeType&&a||!a.el&&a||g(a.el)},w=function(a){return"string"===typeof a},E=function(a){return"function"===typeof a},A={},l=function(a){for(var c=[],
b=arguments.length-1;0<b--;)c[b]=arguments[b+1];if(w(a))b=(A[a]||(A[a]=y(a))).cloneNode(!1);else if(a&&a.nodeType)b=a.cloneNode(!1);else throw Error("At least one argument required");H(b,c);return b};l.extend=function(a){for(var c=[],b=arguments.length-1;0<b--;)c[b]=arguments[b+1];b=A[a]||(A[a]=y(a));return l.bind.apply(l,[this,b].concat(c))};var I=function(a){for(var c=[],b=arguments.length-1;0<b--;)c[b]=arguments[b+1];b=g(a);for(c=u(a,c,b.firstChild);c;)b=c.nextSibling,p(a,c),c=b},Q=function(a){return function(c){return c[a]}},
B=function(a,c,b){this.View=a;this.initData=b;this.oldLookup={};this.lookup={};this.oldViews=[];this.views=[];null!=c&&(this.lookup={},this.key=E(c)?c:Q(c))};B.prototype.update=function(a,c){for(var b=this.View,d=this.key,f=this.initData,e=null!=d,k=this.lookup,h={},p=Array(a.length),q=this.views,m=0;m<a.length;m++){var l=a[m];if(e){var n=d(l);var t=k[n]||new b(f,l,m,a);h[n]=t;t.__redom_id=n}else t=q[m]||new b(f,l,m,a);t.update&&t.update(l,m,a,c);g(t.el).__redom_view=t;p[m]=t}this.oldViews=q;this.views=
p;this.oldLookup=k;this.lookup=h};var O=function(a,c,b,d){return new n(a,c,b,d)},n=function(a,c,b,d){this.__redom_list=!0;this.View=c;this.initData=d;this.views=[];this.pool=new B(c,b,d);this.el=N(a);this.keySet=null!=b};n.prototype.update=function(a,c){void 0===a&&(a=[]);var b=this.keySet,d=this.views,f=b&&this.lookup;this.pool.update(a,c);c=this.pool;a=c.views;c=c.lookup;if(b)for(var e=0;e<d.length;e++){var g=d[e].__redom_id;g in c||p(this,f[g])}I(this,a);b&&(this.lookup=c);this.views=a};n.extend=
function(a,c,b,d){return n.bind(n,a,c,b,d)};O.extend=n.extend;var J=function(a,c){this.el=G("");this.visible=!1;this.view=null;this._placeholder=this.el;a instanceof Node?this._el=a:this._View=a;this._initData=c};J.prototype.update=function(a,c){var b=this._placeholder,d=this.el.parentNode;if(a){if(!this.visible){if(this._el){k(d,this._el,b);p(d,b);this.el=this._el;this.visible=a;return}var e=new this._View(this._initData);this.el=g(e);this.view=e;k(d,e,b);p(d,b)}this.view&&this.view.update&&this.view.update(c)}else if(this.visible){if(this._el){k(d,
b,this._el);p(d,this._el);this.el=b;this.visible=a;return}k(d,b,this.view);p(d,this.view);this.el=b;this.view=null}this.visible=a};var K=function(a,c,b){this.el=N(a);this.Views=c;this.initData=b};K.prototype.update=function(a,c){if(a!==this.route){var b=this.Views[a];this.route=a;this.view=b&&new b(this.initData,c);I(this.el,[this.view])}this.view&&this.view.update&&this.view.update(c,a)};var C={},x=function(a){for(var c=[],b=arguments.length-1;0<b--;)c[b]=arguments[b+1];if(w(a))b=(C[a]||(C[a]=y(a,
"http://www.w3.org/2000/svg"))).cloneNode(!1);else if(a&&a.nodeType)b=a.cloneNode(!1);else throw Error("At least one argument required");H(b,c);return b};x.extend=function(a){a=C[a]||(C[a]=y(a,"http://www.w3.org/2000/svg"));return x.bind(this,a)};x.ns="http://www.w3.org/2000/svg";e.el=l;e.h=l;e.html=l;e.list=O;e.List=n;e.listPool=function(a,c,b){return new B(a,c,b)};e.ListPool=B;e.mount=k;e.unmount=p;e.place=function(a,c){return new J(a,c)};e.Place=J;e.router=function(a,c,b){return new K(a,c,b)};
e.Router=K;e.setAttr=F;e.setStyle=D;e.setChildren=I;e.s=x;e.svg=x;e.text=G;Object.defineProperty(e,"__esModule",{value:!0})});
