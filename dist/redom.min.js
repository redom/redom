!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.redom=e.redom||{})}(this,function(e){"use strict";function t(e,i,o,u){void 0===o&&(o=""),void 0===u&&(u="");var f=[],l=[],a=function(e){return l.push(e)};for(var d in e){var s=e[d];if("object"==typeof s)if("@"===d[0])a(d+"{"),t(s,a,"",d),a("}");else{for(var c=d.split(","),v=new Array(c.length),_=0;_<c.length;_++){var h=c[_].trim();"&"===h[0]?v[_]=o+h.slice(1):v[_]=(o+" "+h).trim()}t(s,a,v.join(","),d)}else f.push(r(n(d))+":"+s+";")}if(f.length&&(i(o+"{"),i(f.join("")),i("}")),l.length)for(var m=0;m<l.length;m++)i(l[m])}function n(e){if(e in g)return g[e];if(e in b)return g[e]=e;for(var t=e[0].toUpperCase()+e.slice(1),n=["webkit","moz","ms","o"],r=0,i=n.length;r<i;r++){var o=n[r]+t;if(o in b)return g[e]="-"+o}return g[e]?void 0:g[e]=e}function r(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],i=r.toLowerCase();r!==i?t.push("-",i):t.push(r)}return t.join("")}function i(e,t){for(var n,r,i,o=0,u=0,f=0;f<=e.length;f++){var l=e.charCodeAt(f);if(l===C||l===A||!l){if(0===o)n=0===f?"div":l?e.substring(u,f):e;else{var a=e.substring(u,f);1===o?r=a:i?i+=" "+a:i=a}u=f+1,o=l===C?1:2}}var d=t?document.createElementNS(t,n):document.createElement(n);return r&&(d.id=r),i&&(t?d.setAttribute("class",i):d.className=i),d}function o(e,t,n){var r=k(e),i=k(t);t===i&&i.__redom_view&&(t=i.__redom_view),t!==i&&(i.__redom_view=t);var o=i.__redom_mounted,u=i.parentNode;return o&&u!==r&&l(t,i,u),null!=n?r.insertBefore(i,k(n)):r.appendChild(i),f(t,i,r,u),t}function u(e,t){var n=e.el||e,r=t.el||t;return t===r&&r.__redom_view&&(t=r.__redom_view),l(t,r,n),n.removeChild(r),t}function f(e,t,n,r){for(var i=t.__redom_lifecycle||(t.__redom_lifecycle={}),o=n===r,u=!1,f=0;f<N.length;f++){var l=N[f];!o&&e!==t&&l in e&&(i[l]=(i[l]||0)+1),i[l]&&(u=!0)}if(u){var d=n,s=!1;if((o||!s&&d&&d.__redom_mounted)&&(a(t,o?"onremount":"onmount"),s=!0),!o)for(;d;){var c=d.parentNode,v=d.__redom_lifecycle||(d.__redom_lifecycle={});for(var _ in i)v[_]=(v[_]||0)+i[_];!s&&(d===document||c&&c.__redom_mounted)&&(a(d,o?"onremount":"onmount"),s=!0),d=c}}}function l(e,t,n){var r=t.__redom_lifecycle;if(r){var i=n;for(t.__redom_mounted&&a(t,"onunmount");i;){var o=i.__redom_lifecycle||(i.__redom_lifecycle={}),u=!1;for(var f in r)o[f]&&(o[f]-=r[f]),o[f]&&(u=!0);u||(i.__redom_lifecycle=null),i=i.parentNode}}}function a(e,t){"onmount"===t?e.__redom_mounted=!0:"onunmount"===t&&(e.__redom_mounted=!1);var n=e.__redom_lifecycle;if(n){var r=e.__redom_view,i=0;r&&r[t]&&r[t]();for(var o in n)o&&i++;if(i)for(var u=e.firstChild;u;){var f=u.nextSibling;a(u,t),u=f}}}function d(e,t,n){var r=k(e);if(void 0!==n)r.style[t]=n;else if(S(t))r.setAttribute("style",t);else for(var i in t)d(r,i,t[i])}function s(e,t,n){var r=k(e),i=r instanceof window.SVGElement;if(void 0!==n)"style"===t?d(r,n):i&&D(n)?r[t]=n:!i&&(t in r||D(n))?r[t]=n:r.setAttribute(t,n);else for(var o in t)s(r,o,t[o])}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];(0===r||r)&&("function"==typeof r?r(e):S(r)||V(r)?e.appendChild(j(r)):T(k(r))?o(e,r):r.length?c(e,r):"object"==typeof r&&s(e,r))}}function v(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];var r;if(S(e))r=L(e).cloneNode(!1);else{if(!T(e))throw new Error("At least one argument required");r=e.cloneNode(!1)}return c(r,t),r}function _(e,t){if(void 0===t.length)return _(e,[t]);for(var n=k(e).firstChild,r=0;r<t.length;r++){var i=t[r];i&&(k(i)!==n?o(e,i,n):n=n.nextSibling)}for(;n;){var f=n.nextSibling;u(e,n),n=f}}function h(e,t,n,r){return new m(e,t,n,r)}function m(e,t,n,r){this.__redom_list=!0,this.View=t,this.initData=r,this.views=[],this.el=E(e),null!=n&&(this.lookup={},this.key=D(n)?n:B(n))}function p(e,t,n){return new G(e,t,n)}function w(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];var r;if(S(e))r=O(e).cloneNode(!1);else{if(!T(e))throw new Error("At least one argument required");r=e.cloneNode(!1)}return c(r,t),r}var y={},g={},b={};document&&(b=document.createElement("p").style);var x=function(e,n){if(null!=n){if(n in y)return;y[n]=!0}var r=[];if(t(e,function(e){r.push(e)}),r.length){var i=document.createElement("style");i.textContent=r.join(""),document.head.appendChild(i)}},C="#".charCodeAt(0),A=".".charCodeAt(0),N=["onmount","onunmount"],j=function(e){return document.createTextNode(e)},E=function(e){return S(e)?v(e):k(e)},k=function(e){return e.nodeType&&e||!e.el&&e||k(e.el)},S=function(e){return"string"==typeof e},V=function(e){return"number"==typeof e},D=function(e){return"function"==typeof e},T=function(e){return e&&e.nodeType},q={},L=function(e){return q[e]||(q[e]=i(e))};v.extend=function(e){var t=L(e);return v.bind(this,t)};var z=v,B=function(e){return function(t){return t[e]}};m.extend=function(e,t,n,r){return m.bind(m,e,t,n,r)},h.extend=m.extend,m.prototype.update=function(e){var t=this;void 0===e&&(e=[]);for(var n=this.View,r=this.key,i=null!=r,o=this.initData,f=new Array(e.length),l=this.views,a=r&&{},d=r&&this.lookup,s=0;s<e.length;s++){var c=e[s],v=void 0;if(i){var h=r(c);v=f[s]=d[h]||new n(o,c,s,e),a[h]=v,v.__id=h}else v=f[s]=l[s]||new n(o,c,s,e);var m=v.el;m.__redom_list&&(m=m.el),m.__redom_view=v,v.update&&v.update(c,s,e)}if(i)for(var p=0;p<l.length;p++){var w=l[p].__id;w in a||u(t,d[w])}_(this,f),i&&(this.lookup=a),this.views=f};var G=function(e,t,n){this.el=E(e),this.Views=t,this.initData=n};G.prototype.update=function(e,t){if(e!==this.route){var n=this.Views[e];this.view=n&&new n(this.initData,t),this.route=e,_(this.el,[this.view])}this.view&&this.view.update&&this.view.update(t,e)};var M={},O=function(e){return M[e]||(M[e]=i(e,"http://www.w3.org/2000/svg"))};w.extend=function(e){var t=O(e);return w.bind(this,t)},e.css=x,e.prefix=n,e.html=v,e.el=z,e.list=h,e.List=m,e.mount=o,e.unmount=u,e.router=p,e.Router=G,e.setAttr=s,e.setStyle=d,e.setChildren=_,e.svg=w,e.text=j,Object.defineProperty(e,"__esModule",{value:!0})});