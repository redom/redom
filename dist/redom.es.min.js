var HASH=35,DOT=46,TAG_NAME=0,ID=1,CLASS_NAME=2,parseQuery=function(e){var n=null,t=null,o=null,i=TAG_NAME,l=0;for(var r=0;r<=e.length;r++){var u=e.charCodeAt(r),_=u===HASH,d=u===DOT,c=!u;(_||d||c)&&(i===TAG_NAME?(r===0?(n='div'):(n=e.substring(l,r))):i===ID?(t=e.substring(l,r)):(o?(o+=' '+e.substring(l,r)):(o=e.substring(l,r))),_?(i=ID):d&&(i=CLASS_NAME),l=r+1)}return{tag:n,id:t,className:o}},createElement=function(e,n){var t=parseQuery(e),o=t.tag,i=t.id,l=t.className,r=n?document.createElementNS(n,o):document.createElement(o);i&&(r.id=i);l&&(n?r.setAttribute('class',l):(r.className=l));return r},unmount=function(e,n){var t=getEl(e),o=getEl(n);n===o&&o.__redom_view&&(n=o.__redom_view);o.parentNode&&(doUnmount(n,o,t),t.removeChild(o));return n},doUnmount=function(e,n,t){var o=n.__redom_lifecycle;if(!o){n.__redom_mounted=!1;return}var i=t;n.__redom_mounted&&trigger(n,'onunmount');while(i){var l=i.__redom_lifecycle||(i.__redom_lifecycle={}),r=!1;for(var u in o)l[u]&&(l[u]-=o[u]),l[u]&&(r=!0);r||(i.__redom_lifecycle=null);i=i.parentNode}},hookNames=['onmount','onunmount'],shadowRootAvailable='ShadowRoot' in window,mount=function(e,n,t){var o=getEl(e),i=getEl(n);n===i&&i.__redom_view&&(n=i.__redom_view);n!==i&&(i.__redom_view=n);var l=i.__redom_mounted,r=i.parentNode;l&&r!==o&&doUnmount(n,i,r);t!=null?o.insertBefore(i,getEl(t)):o.appendChild(i);doMount(n,i,o,r);return n},doMount=function(e,n,t,o){var i=n.__redom_lifecycle||(n.__redom_lifecycle={}),l=t===o,r=!1;for(var u=0;u<hookNames.length;u++){var _=hookNames[u];!l&&e!==n&&_ in e&&(i[_]=(i[_]||0)+1);i[_]&&(r=!0)}if(!r){n.__redom_mounted=!0;return}var d=t,c=!1;(l||!c&&(d&&d.__redom_mounted))&&(trigger(n,l?'onremount':'onmount'),c=!0);if(l){return}while(d){var f=d.parentNode,w=d.__redom_lifecycle||(d.__redom_lifecycle={});for(var a in i)w[a]=(w[a]||0)+i[a];!c&&(d===document||shadowRootAvailable&&d instanceof window.ShadowRoot||f&&f.__redom_mounted)&&(trigger(d,l?'onremount':'onmount'),c=!0);d=f}},trigger=function(e,n){n==='onmount'?(e.__redom_mounted=!0):n==='onunmount'&&(e.__redom_mounted=!1);var t=e.__redom_lifecycle;if(!t){return}var o=e.__redom_view,i=0;o&&o[n]&&o[n]();for(var l in t)l&&i++;if(i){var r=e.firstChild;while(r){var u=r.nextSibling;trigger(r,n);r=u}}},setStyle=function(e,n,t){var o=getEl(e);if(t!==void 0)o.style[n]=t;else if(isString(n))o.setAttribute('style',n);else{for(var i in n)setStyle(o,i,n[i])}},xlinkns='http://www.w3.org/1999/xlink',setAttr=function(e,n,t){var o=getEl(e),i=o instanceof SVGElement;if(t!==void 0){if(n==='style')setStyle(o,t);else if(i&&isFunction(t))o[n]=t;else if(!i&&(n in o||isFunction(t)))o[n]=t;else{if(i&&n==='xlink'){setXlink(o,t);return}o.setAttribute(n,t)}}else{for(var l in n)setAttr(o,l,n[l])}};function setXlink(e,n){for(var t in n)e.setAttributeNS(xlinkns,t,n[t])}var text=function(e){return document.createTextNode(e)},parseArguments=function(e,n){for(var t=0;t<n.length;t++){var o=n[t];if(o!==0&&!o){continue}typeof o==='function'?o(e):isString(o)||isNumber(o)?e.appendChild(text(o)):isNode(getEl(o))?mount(e,o):o.length?parseArguments(e,o):typeof o==='object'&&setAttr(e,o)}},ensureEl=function(e){return isString(e)?html(e):getEl(e)},getEl=function(e){return e.nodeType&&e||!e.el&&e||getEl(e.el)},isString=function(e){return typeof e==='string'},isNumber=function(e){return typeof e==='number'},isFunction=function(e){return typeof e==='function'},isNode=function(e){return e&&e.nodeType},htmlCache={},memoizeHTML=function(e){return htmlCache[e]||(htmlCache[e]=createElement(e))},html=function(e){var n=[],t=arguments.length-1;while(t-->0)n[t]=arguments[t+1];var o;if(isString(e))o=memoizeHTML(e).cloneNode(!1);else if(isNode(e))o=e.cloneNode(!1);else{throw new Error('At least one argument required')}parseArguments(o,n);return o};html.extend=function(e){var n=[],t=arguments.length-1;while(t-->0)n[t]=arguments[t+1];var o=memoizeHTML(e);return html.bind.apply(html,[this,o].concat(n))};var el=html,h=html,setChildren=function(e){var n=[],t=arguments.length-1;while(t-->0)n[t]=arguments[t+1];var o=getEl(e),i=traverse(e,n,o.firstChild);while(i){var l=i.nextSibling;unmount(e,i);i=l}};function traverse(e,n,t){var o=t;for(var i=0;i<n.length;i++){var l=n[i];if(!l){continue}if(l.length!=null){o=traverse(e,l,o);continue}var r=getEl(l);if(r===o){o=o.nextSibling;continue}mount(e,l,o)}return o}var propKey=function(e){return function(n){return n[e]}},listPool=function(e,n,t){return new ListPool(e,n,t)},ListPool=function(e,n,t){this.View=e;this.initData=t;this.oldLookup={};this.lookup={};this.oldViews=[];this.views=[];n!=null&&(this.lookup={},this.key=isFunction(n)?n:propKey(n))};ListPool.prototype.update=function(e,n){var t=this,o=t.View,i=t.key,l=t.initData,r=i!=null,u=this.lookup,_={},d=new Array(e.length),c=this.views;for(var f=0;f<e.length;f++){var w=e[f],a=void 0;if(r){var m=i(w);a=u[m]||new o(l,w,f,e);_[m]=a;a.__redom_id=m}else a=c[f]||new o(l,w,f,e);a.update&&a.update(w,f,e,n);var p=getEl(a.el);p.__redom_view=a;d[f]=a}this.oldViews=c;this.views=d;this.oldLookup=u;this.lookup=_};var list=function(e,n,t,o){return new List(e,n,t,o)},List=function(e,n,t,o){this.__redom_list=!0;this.View=n;this.initData=o;this.views=[];this.pool=new ListPool(n,t,o);this.el=ensureEl(e);this.keySet=t!=null};List.prototype.update=function(e,n){var t=this;e===void 0&&(e=[]);var o=this,i=o.keySet,l=this.views,r=i&&this.lookup;this.pool.update(e,n);var u=this.pool,_=u.views,d=u.lookup;if(i){for(var c=0;c<l.length;c++){var f=l[c].__redom_id;(f in d)||unmount(t,r[f])}}setChildren(this,_);i&&(this.lookup=d);this.views=_};List.extend=function(e,n,t,o){return List.bind(List,e,n,t,o)};list.extend=List.extend;var place=function(e,n){return new Place(e,n)},Place=function(e,n){this.el=text('');this.visible=!1;this.view=null;this._placeholder=this.el;e instanceof Node?(this._el=e):(this._View=e);this._initData=n};Place.prototype.update=function(e,n){var t=this._placeholder,o=this.el.parentNode;if(e){if(!this.visible){if(this._el){mount(o,this._el,t);unmount(o,t);this.el=this._el;this.visible=e;return}var i=this._View,l=new i(this._initData);this.el=getEl(l);this.view=l;mount(o,l,t);unmount(o,t)}this.view&&this.view.update&&this.view.update(n)}else{if(this.visible){if(this._el){mount(o,t,this._el);unmount(o,this._el);this.el=t;this.visible=e;return}mount(o,t,this.view);unmount(o,this.view);this.el=t;this.view=null}}this.visible=e};var router=function(e,n,t){return new Router(e,n,t)},Router=function(e,n,t){this.el=ensureEl(e);this.Views=n;this.initData=t};Router.prototype.update=function(e,n){if(e!==this.route){var t=this.Views,o=t[e];this.route=e;this.view=o&&new o(this.initData,n);setChildren(this.el,[this.view])}this.view&&this.view.update&&this.view.update(n,e)};var ns='http://www.w3.org/2000/svg',svgCache={},memoizeSVG=function(e){return svgCache[e]||(svgCache[e]=createElement(e,ns))},svg=function(e){var n=[],t=arguments.length-1;while(t-->0)n[t]=arguments[t+1];var o;if(isString(e))o=memoizeSVG(e).cloneNode(!1);else if(isNode(e))o=e.cloneNode(!1);else{throw new Error('At least one argument required')}parseArguments(o,n);return o};svg.extend=function(e){var n=memoizeSVG(e);return svg.bind(this,n)};svg.ns=ns;var s=svg;export { el, h, html, list, List, listPool, ListPool, mount, unmount, place, Place, router, Router, setAttr, setStyle, setChildren, s, svg, text }